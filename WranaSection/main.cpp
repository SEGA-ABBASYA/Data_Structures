#include "Maingraph.h"
#include "Database.h"
#include <QApplication>
using namespace std;
void write()
{
    Database data;
    data.write();
}
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Database db;
    //UserView w;
    db.read();
    //w.show();
    vector<string>c;
    c.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c.push_back("++++++.................................................+");
    c.push_back("++++++.................................................+");
    c.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++++++");
    vector<string>c2;
    c2.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c2.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c2.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c2.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c2.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c2.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c2.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c2.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c2.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c2.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c2.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c2.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c2.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++...+");
    c2.push_back("++++++.................................................+");
    c2.push_back("++++++.................................................+");
    c2.push_back("++++++++++++++++++++++++++++++++++++++++++++++++++++++++");
    MainGraph mg;
    mg.addfloor(c);
    mg.addfloor(c2);
    Location ll(0, false, "Office", { 12,6 });
    Location sta(0, false, "Office", { 12,47 });
    mg.stairs.push_back(sta);
    vector<pair<int, pair<int, int>>> ans = mg.SearchBig(0, 13, 10, ll);
    for (auto i : ans)
    {
        cout << i.first << ' ' << i.second.first << ' ' << i.second.second << endl;
    }


    QObject::connect(&a, &QCoreApplication::aboutToQuit, write);
    return a.exec();
}
